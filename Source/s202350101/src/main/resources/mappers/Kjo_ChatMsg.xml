<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- com.oracle.s202350101.뒤에 매핑하고 싶은 모델쓰면 됩니다
	 mapper 여러개 쓰셔도 됩니다. -->


<mapper namespace="com.oracle.s202350101.ChatMsgMapper">
    <!-- ChatMsg -->


    <select id="findAll" resultType="ChatMsg">
        select *
        from chat_msg
    </select>
    
    <select id="findByRoomId" parameterType="ChatRoom" resultType="ChatMsg">
        select * from chat_msg where chat_room_id = #{chat_room_id}
    </select>

    <insert id="saveMsg" parameterType="ChatMsg">
        insert into chat_msg values (#{chat_room_id}, (select count(*)+1 from chat_msg where chat_room_id=#{chat_room_id}), #{sender_id}, #{msg_con},sysdate, 'N')

    </insert>

    <select id="cntMsg" resultType="int">
        select count(*) from chat_msg where chat_room_id=#{chat_room_id}
    </select>


</mapper>

