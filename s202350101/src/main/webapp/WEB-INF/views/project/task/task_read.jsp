<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %><%@ page language="java" contentType="text/html; charset=UTF-8"         pageEncoding="UTF-8"%><%@ include file="/WEB-INF/views/header.jsp"%><!DOCTYPE html><html><head><meta charset="UTF-8"><title>Task List</title><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script><style>    .attached_img{        width: 150px;        height: 150px;        padding: 1%;        border: 1px solid black;}</style><script type="text/javascript">    function delete_task(user_id,task_id,project_id){        var userInput =  prompt("삭제라혀면 ID 를입력하세요 ");        if(userInput === user_id){            $.ajax({                url         :'/task_garbage',                type        :'post',                data        :{"task_id":task_id,                            'project_id':project_id},                dataType    :"text",                success     :function (data){                    if(data === '1'){                        alert("삭제성공");                        window.location.href ="/dashboard";                    } else{// UPDATE를 수행햇지만 결과가 0이나올떄                        alert("삭제 에러 ");                    }                    return;                }            });        } else {            alert("작성자만 삭제 할 수 있습니다. 아이디를 확인하세요");            return;        }    }    function update_task(user_id,task_id,project_id){        //var userInput =  prompt("수정하려면 ID 를 입력하세요 ");        //if(userInput === user_id) {            var newUrl = "/task_update_form?projectId=" + project_id + "&taskId=" + task_id;            window.location.href = newUrl;        //} else {        //    alert("작성자만 수정 할 수 있습니다. 아이디를 확인하세요 ");        //    return;        // }    }    $(function() {        $.ajax({            url			: '/main_header',            dataType 	: 'html',            success		: function(data) {                console.log("ddd");                $('#header').html(data);            }        });        $.ajax({            url			: '/main_menu',            dataType 	: 'html',            success		: function(data) {                $('#menubar').html(data);            }        });        $.ajax({            url			: '/main_footer',            dataType 	: 'html',            success		: function(data) {                $('#footer').html(data);            }        });    });</script></head><body>	<div class="container-fluid">		<div style="margin-top:15px;height:45px">			<span class="apptitle">작업 상세 내역</span>		</div>	</div>	<div class="container-fluid">		<table width="100%" style="margin-top:10px;">			<tr>				<td style="text-align:right">					<button type="button" class="btn btn-dark btn-sm" onclick="window.close()">닫기</button>				</td>			</tr>		</table>						        <table class="table">        	<colgroup>        		<col width="15%"></td>        		<col width="85%"></td>        	</colgroup>            <tbody>                <tr>                    <th>프로젝트 단계</th>                    <td><span class="font-cate">${task.project_step_seq}. ${task.project_s_name}</span></td>                </tr>                <tr>                    <th>작업 제목</th>                    <td><span class="font-subject">${task.task_subject}</span></td>                </tr>                <tr>                    <th>시작일 ~ 마감일</th>                    <td>${task.task_start_time} ~ ${task.task_end_time}</td>                </tr>                <tr>                    <th>작업 우선순위</th>                    <td>                        <c:choose>                            <c:when test="${task.task_priority eq 0}">낮음</c:when>                            <c:when test="${task.task_priority eq 1}">보통</c:when>                            <c:when test="${task.task_priority eq 2}">높음</c:when>                        </c:choose>                    </td>                </tr>                <tr>                    <th>작업 진행 상태</th>                    <td>                        <c:choose>                            <c:when test="${task.task_status eq 0}">예정된 작업</c:when>                            <c:when test="${task.task_status eq 1}">진행중인 작업</c:when>                            <c:when test="${task.task_status eq 2}">완료된 작업</c:when>                        </c:choose>                    </td>                </tr>                <tr>                    <th>작업 담당자</th>                    <td>${task.user_name}</td>                </tr>                <tr>                    <th>공동 작업자</th>                    <td>                        <c:choose>                            <c:when test="${not empty taskSubList}">                                <c:forEach items="${taskSubList}" var="taskSub" varStatus="seq">                                    ${taskSub.user_name}<br>                                </c:forEach>                            </c:when>                            <c:otherwise>		공동 작업자 없음                            </c:otherwise>                        </c:choose>                    </td>                </tr>                <tr>                    <th>첨부파일</th>                    <td>                        <c:choose>                            <c:when test="${not empty taskAttachList}">                                <div>                                    <c:forEach items="${taskAttachList}" var="taskAttach">                                            <a href="javascript:popup('/upload/${taskAttach.attach_path}',800,600)">${taskAttach.attach_name}</a>                                    </c:forEach>                                </div>                            </c:when>                        </c:choose>                    </td>                </tr>                <tr style="height:200px">                    <th>작업 내용</th>                    <td><pre>${task.task_content}</pre></td>                </tr>            </tbody>        </table>	</div></body></html>